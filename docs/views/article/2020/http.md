---
title: HTTP协议
date: 2018-01-01
tags:
  - HTTP
categories:
  - 文章
---

## HTTP 协议的主要特点

无连接，无状态，简单快速，灵活

## HTTP 报文组成部分

1. 请求报文：请求行=>请求头=>空行=>请求体
2. 响应报文：响应行=>响应头=>空行=>响应体

## HTTP 方法

1. GET（获取资源）
2. POST（传输资源）
3. PUT（更新资源）
4. DELETE（删除资源）
5. HEAD（获得报文首部）

## POST 和 GET 的区别

1. GET 在浏览器回退时是无害的，POST 会再次请求
2. GET 产生的 URL 地址可以被收藏，POST 不行
3. GET 请求会被浏览器主动缓存，POST 不会缓存，除非手动设置
4. GET 请求只能用 URL 编码，而 POST 支持多种编码方式
5. GET 请求参数会被完整保留在浏览器历史记录里，POST 不会
6. GET 请求在 URL 中传送的参数是有长度限制的，POST 没有限制
7. GET 只接受 ASCLL 码的参数类型，POST 没有限制
8. GET 比 POST 更不安全，参数暴露在 URL 上，不能用来传输敏感信息
9. GET 参数通过 URL 传递，POST 放在 Request body 中

## HTTP 状态码

1xx：指示信息-表示请求已接收，继续处理
2xx：成功-表示请求已被成功接收
3xx：重定向-要完成请求必须进行更进一步操作
4xx：客户端错误-请求有语法错误或者请求无法实现
5xx：服务器错误-服务器未能实现合法的请求

200 OK：客户端请求成功
206 Partial Content：客户端发送一个带有 Range 头的 GET 请求，服务器完成了它
301 Moved Permanently：所有请求的页面已经转移至新的 URL
302 Found：所请求的页面已经临时转移至新的 URL
304 Not Modified：客户端有缓冲的文档并发出了一个条件性的请求，服务器告诉客户，原来缓冲的文档还可以继续使用
400 Bad Request：客户端请求有语法错误，不能被服务器所理解
401 Unauthoruzed：请求未经授权，这个状态码必须和 www-Authenticate 报头域一起使用
403 Forbidden：对被请求页面的访问被禁止
404 Not Found：请求资源不存在
500 internal Server Error：服务器发生不可预期的错误原来缓冲的文档还可以继续使用
503 Server Unavailable：请求未完成，服务器临时过载或当机，一段时间后可能恢复正常

## 持久连接

HTTP 协议采用“请求-应答”模式，当使用普通模式，即非 Keep-Alive 模式时，每个请求和应答客户和服务器都要更新建立一个连接，完成后立即断开连接（HTTP 协议为无连接的协议）
当使用 Keep-Alive 模式（持久连接，连接重用，HTTP/1.1 可用）时，Keep-Alive 功能使客户端到服务器端的连接持续有效，当出现对服务器的后继请求时，Keep-Alive 功能避免了建立或重新建立链接

## 管线化

在使用持久连接的情况下，某个连接上消息的传递类似于
请求 1->响应 1->请求 2->响应 2->请求 3->响应 3
某个连接上的消息变成了类似这样
请求 1->请求 2->请求 3->响应 1->响应 2->响应 3

1. 管线化机制通过持久连接完成，仅 HTTP/1.1 支持此技术
2. 只有 GET 和 HEAD 请求可用进行管线化，而 POST 有所限制
3. 初次创建连接时不应启动管线化机制，因为对方（服务器）不一定支持 HTTP/1.1 版本的协议
4. 管线化不会影响响应到来的顺序
5. HTTP/1.1 要求服务器端支持管线化，但并不要求服务器也对响应进行管线化处理，只是要求对于管线化的请求不失败即可
6. 由于上面提到的服务器问题，开启管线化很可能并不会带来大幅度的性能提升，而且很多服务器端和代理程序对管线化支持并不好，因此现代浏览器如 Chrome 和 Firefox 默认并未开启管线化支持
